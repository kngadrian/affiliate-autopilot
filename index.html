<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Affiliate Autopilot ‚Äî MunchEye Launch Dashboard</title>
<style>
/* ===== CSS RESET & BASE ===== */
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  background:#0a0e1a;
  color:#e2e8f0;
  min-height:100vh;
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale
}

/* ===== HEADER ===== */
.header{
  background:linear-gradient(135deg,#1a1f35 0%,#0a0e1a 100%);
  border-bottom:1px solid rgba(96,165,250,0.1);
  padding:32px 40px;
  position:sticky;
  top:0;
  z-index:100;
  backdrop-filter:blur(12px);
  box-shadow:0 4px 24px rgba(0,0,0,0.4)
}
.header h1{
  font-size:32px;
  font-weight:800;
  background:linear-gradient(120deg,#60a5fa 0%,#a78bfa 50%,#f472b6 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  letter-spacing:-0.5px;
  margin-bottom:8px;
  animation:slideDown 0.6s ease-out
}
.header p{
  color:#94a3b8;
  font-size:15px;
  font-weight:400;
  line-height:1.5;
  animation:fadeIn 0.8s ease-out 0.2s both
}

/* ===== STATS SECTION ===== */
.stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;
  padding:32px 40px;
  animation:fadeIn 0.8s ease-out 0.3s both
}
.stat{
  background:linear-gradient(135deg,#1e293b 0%,#0f172a 100%);
  border:1px solid rgba(96,165,250,0.15);
  border-radius:16px;
  padding:24px 28px;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  position:relative;
  overflow:hidden
}
.stat::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:3px;
  background:linear-gradient(90deg,#60a5fa,#a78bfa);
  opacity:0;
  transition:opacity 0.3s ease
}
.stat:hover{
  transform:translateY(-4px) scale(1.02);
  border-color:rgba(96,165,250,0.4);
  box-shadow:0 12px 32px rgba(96,165,250,0.15),0 0 0 1px rgba(96,165,250,0.1) inset
}
.stat:hover::before{opacity:1}
.stat .num{
  font-size:36px;
  font-weight:800;
  background:linear-gradient(135deg,#60a5fa,#818cf8);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  line-height:1.2;
  margin-bottom:6px;
  letter-spacing:-1px
}
.stat .label{
  color:#94a3b8;
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:1.2px;
  font-weight:600
}

/* ===== FILTERS ===== */
.filters{
  padding:8px 40px 24px;
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  animation:fadeIn 0.8s ease-out 0.4s both
}
.filters button{
  background:rgba(30,41,59,0.6);
  border:1px solid rgba(71,85,105,0.5);
  color:#cbd5e1;
  padding:10px 20px;
  border-radius:24px;
  cursor:pointer;
  font-size:14px;
  font-weight:500;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  position:relative;
  overflow:hidden;
  backdrop-filter:blur(8px)
}
.filters button::before{
  content:'';
  position:absolute;
  top:50%;
  left:50%;
  width:0;
  height:0;
  border-radius:50%;
  background:rgba(59,130,246,0.2);
  transform:translate(-50%,-50%);
  transition:width 0.4s ease,height 0.4s ease
}
.filters button:hover{
  transform:translateY(-2px);
  border-color:rgba(96,165,250,0.6);
  color:#e2e8f0;
  box-shadow:0 4px 16px rgba(59,130,246,0.2)
}
.filters button:hover::before{
  width:200px;
  height:200px
}
.filters button.active{
  background:linear-gradient(135deg,#3b82f6,#2563eb);
  border-color:rgba(96,165,250,0.8);
  color:#fff;
  box-shadow:0 4px 20px rgba(59,130,246,0.4),0 0 0 1px rgba(96,165,250,0.3) inset;
  transform:translateY(-2px)
}
.filters button span{position:relative;z-index:1}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(380px,1fr));
  gap:24px;
  padding:24px 40px 64px;
  animation:fadeIn 0.8s ease-out 0.5s both
}

/* ===== CARDS ===== */
.card{
  background:linear-gradient(135deg,rgba(30,41,59,0.8) 0%,rgba(15,23,42,0.9) 100%);
  border:1px solid rgba(71,85,105,0.4);
  border-radius:20px;
  padding:28px;
  transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
  position:relative;
  cursor:pointer;
  overflow:hidden;
  backdrop-filter:blur(12px)
}
.card::before{
  content:'';
  position:absolute;
  top:-2px;
  left:-2px;
  right:-2px;
  bottom:-2px;
  background:linear-gradient(135deg,rgba(96,165,250,0.3),rgba(167,139,250,0.3));
  border-radius:20px;
  opacity:0;
  z-index:-1;
  transition:opacity 0.4s ease
}
.card:hover{
  transform:translateY(-8px) scale(1.02);
  border-color:rgba(96,165,250,0.6);
  box-shadow:0 20px 48px rgba(0,0,0,0.5),0 0 0 1px rgba(96,165,250,0.2) inset;
  background:linear-gradient(135deg,rgba(30,41,59,0.95) 0%,rgba(15,23,42,1) 100%)
}
.card:hover::before{opacity:1}
.card.mega{
  border-color:rgba(245,158,11,0.6);
  box-shadow:0 8px 32px rgba(245,158,11,0.2),0 0 0 1px rgba(245,158,11,0.15) inset
}
.card.mega::before{
  background:linear-gradient(135deg,rgba(245,158,11,0.4),rgba(251,191,36,0.3))
}

/* ===== SCORE BADGE ===== */
.score{
  position:absolute;
  top:20px;
  right:20px;
  width:56px;
  height:56px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  font-size:20px;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  box-shadow:0 4px 16px rgba(0,0,0,0.3)
}
.card:hover .score{
  transform:rotate(360deg) scale(1.1)
}
.score.high{
  background:linear-gradient(135deg,rgba(34,197,94,0.15),rgba(34,197,94,0.25));
  color:#22c55e;
  border:2px solid #22c55e;
  box-shadow:0 0 24px rgba(34,197,94,0.4),0 4px 16px rgba(0,0,0,0.3)
}
.score.med{
  background:linear-gradient(135deg,rgba(245,158,11,0.15),rgba(245,158,11,0.25));
  color:#f59e0b;
  border:2px solid #f59e0b;
  box-shadow:0 0 24px rgba(245,158,11,0.4),0 4px 16px rgba(0,0,0,0.3)
}
.score.low{
  background:linear-gradient(135deg,rgba(100,116,139,0.15),rgba(100,116,139,0.25));
  color:#94a3b8;
  border:2px solid #64748b;
  box-shadow:0 0 16px rgba(100,116,139,0.3),0 4px 16px rgba(0,0,0,0.3)
}

/* ===== CARD CONTENT ===== */
.card h3{
  font-size:19px;
  font-weight:700;
  margin-bottom:8px;
  padding-right:64px;
  line-height:1.4;
  color:#f1f5f9;
  letter-spacing:-0.3px
}
.card .vendor{
  color:#94a3b8;
  font-size:14px;
  margin-bottom:16px;
  font-weight:500
}

/* ===== TAGS ===== */
.tags{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-bottom:16px
}
.tag{
  background:rgba(51,65,85,0.6);
  color:#94a3b8;
  padding:4px 12px;
  border-radius:12px;
  font-size:12px;
  font-weight:600;
  white-space:nowrap;
  transition:all 0.2s ease;
  border:1px solid transparent
}
.tag:hover{transform:translateY(-2px)}
.tag.ai{
  background:linear-gradient(135deg,rgba(59,130,246,0.15),rgba(59,130,246,0.25));
  color:#60a5fa;
  border-color:rgba(96,165,250,0.3);
  box-shadow:0 0 12px rgba(59,130,246,0.2)
}
.tag.saas{
  background:linear-gradient(135deg,rgba(139,92,246,0.15),rgba(139,92,246,0.25));
  color:#a78bfa;
  border-color:rgba(167,139,250,0.3);
  box-shadow:0 0 12px rgba(139,92,246,0.2)
}
.tag.mktg{
  background:linear-gradient(135deg,rgba(16,185,129,0.15),rgba(16,185,129,0.25));
  color:#34d399;
  border-color:rgba(52,211,153,0.3);
  box-shadow:0 0 12px rgba(16,185,129,0.2)
}
.tag.content{
  background:linear-gradient(135deg,rgba(245,158,11,0.15),rgba(245,158,11,0.25));
  color:#fbbf24;
  border-color:rgba(251,191,36,0.3);
  box-shadow:0 0 12px rgba(245,158,11,0.2)
}
.tag.auto{
  background:linear-gradient(135deg,rgba(236,72,153,0.15),rgba(236,72,153,0.25));
  color:#f472b6;
  border-color:rgba(244,114,182,0.3);
  box-shadow:0 0 12px rgba(236,72,153,0.2)
}

/* ===== META INFO ===== */
.meta{
  display:flex;
  gap:20px;
  font-size:14px;
  color:#94a3b8;
  margin-bottom:20px;
  flex-wrap:wrap;
  font-weight:500
}
.meta span{
  display:flex;
  align-items:center;
  gap:6px;
  transition:color 0.2s ease
}
.meta span:hover{color:#cbd5e1}

/* ===== BUTTONS ===== */
.card .btn{
  display:inline-block;
  background:linear-gradient(135deg,#3b82f6,#2563eb);
  color:#fff;
  padding:12px 24px;
  border-radius:12px;
  text-decoration:none;
  font-size:14px;
  font-weight:600;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  border:none;
  cursor:pointer;
  box-shadow:0 4px 16px rgba(59,130,246,0.3);
  position:relative;
  overflow:hidden
}
.card .btn::before{
  content:'';
  position:absolute;
  top:50%;
  left:50%;
  width:0;
  height:0;
  background:rgba(255,255,255,0.2);
  border-radius:50%;
  transform:translate(-50%,-50%);
  transition:width 0.5s ease,height 0.5s ease
}
.card .btn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 24px rgba(59,130,246,0.5);
  background:linear-gradient(135deg,#2563eb,#1d4ed8)
}
.card .btn:hover::before{
  width:300px;
  height:300px
}
.card .btn:active{transform:translateY(0) scale(0.98)}

.mega-badge{
  display:inline-block;
  background:linear-gradient(135deg,#f59e0b,#d97706);
  color:#fff;
  font-size:10px;
  font-weight:800;
  padding:4px 10px;
  border-radius:6px;
  text-transform:uppercase;
  margin-left:8px;
  letter-spacing:0.5px;
  box-shadow:0 2px 8px rgba(245,158,11,0.4);
  animation:pulse 2s ease-in-out infinite
}

/* ===== MODAL ===== */
.modal{
  display:none;
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:rgba(0,0,0,0.85);
  z-index:1000;
  align-items:center;
  justify-content:center;
  padding:20px;
  backdrop-filter:blur(8px);
  animation:fadeIn 0.3s ease-out
}
.modal.open{display:flex}
.modal-content{
  background:linear-gradient(135deg,#1e293b 0%,#0f172a 100%);
  border:1px solid rgba(96,165,250,0.2);
  border-radius:24px;
  max-width:960px;
  width:100%;
  max-height:90vh;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  box-shadow:0 32px 64px rgba(0,0,0,0.6),0 0 0 1px rgba(96,165,250,0.1) inset;
  animation:modalSlideIn 0.4s cubic-bezier(0.4,0,0.2,1)
}

.modal-header{
  padding:32px 40px;
  border-bottom:1px solid rgba(71,85,105,0.4);
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  background:linear-gradient(135deg,rgba(30,41,59,0.6),rgba(15,23,42,0.8))
}
.modal-header h2{
  font-size:28px;
  font-weight:800;
  padding-right:48px;
  line-height:1.3;
  color:#f1f5f9;
  letter-spacing:-0.5px
}
.close-btn{
  background:rgba(51,65,85,0.4);
  border:1px solid rgba(71,85,105,0.5);
  color:#94a3b8;
  font-size:24px;
  cursor:pointer;
  padding:0;
  width:40px;
  height:40px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  font-weight:300
}
.close-btn:hover{
  background:rgba(239,68,68,0.2);
  border-color:rgba(239,68,68,0.5);
  color:#ef4444;
  transform:rotate(90deg) scale(1.1);
  box-shadow:0 4px 16px rgba(239,68,68,0.3)
}

.modal-body{
  overflow-y:auto;
  flex:1;
  scroll-behavior:smooth
}
.modal-body::-webkit-scrollbar{width:8px}
.modal-body::-webkit-scrollbar-track{background:rgba(15,23,42,0.5)}
.modal-body::-webkit-scrollbar-thumb{
  background:rgba(96,165,250,0.3);
  border-radius:4px
}
.modal-body::-webkit-scrollbar-thumb:hover{background:rgba(96,165,250,0.5)}

/* ===== TABS ===== */
.tabs{
  display:flex;
  gap:4px;
  padding:0 40px;
  border-bottom:1px solid rgba(71,85,105,0.4);
  background:rgba(15,23,42,0.6)
}
.tab{
  background:none;
  border:none;
  color:#94a3b8;
  padding:16px 24px;
  cursor:pointer;
  font-size:15px;
  font-weight:600;
  border-bottom:3px solid transparent;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  position:relative
}
.tab::before{
  content:'';
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  height:3px;
  background:linear-gradient(90deg,#60a5fa,#a78bfa);
  transform:scaleX(0);
  transition:transform 0.3s cubic-bezier(0.4,0,0.2,1)
}
.tab:hover{
  color:#cbd5e1;
  background:rgba(51,65,85,0.3)
}
.tab.active{
  color:#60a5fa;
  background:rgba(59,130,246,0.1)
}
.tab.active::before{transform:scaleX(1)}

.tab-content{
  display:none;
  animation:fadeIn 0.4s ease-out
}
.tab-content.active{display:block}
.detail-section{padding:32px 40px}
.detail-section h3{
  font-size:22px;
  margin-bottom:16px;
  color:#f1f5f9;
  font-weight:700;
  letter-spacing:-0.3px
}
.detail-section h4{
  font-size:18px;
  margin-top:24px;
  margin-bottom:12px;
  color:#cbd5e1;
  font-weight:600
}
.detail-section p{
  color:#94a3b8;
  line-height:1.8;
  margin-bottom:16px;
  font-size:15px
}
.detail-section ul{
  margin-left:24px;
  color:#94a3b8;
  line-height:2
}
.detail-section ul li{margin-bottom:8px}

.detail-row{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:16px;
  margin-bottom:24px
}
.detail-item{
  background:rgba(15,23,42,0.6);
  padding:16px 20px;
  border-radius:12px;
  border:1px solid rgba(71,85,105,0.4);
  transition:all 0.3s ease
}
.detail-item:hover{
  border-color:rgba(96,165,250,0.4);
  background:rgba(15,23,42,0.8);
  transform:translateY(-2px)
}
.detail-item .label{
  font-size:11px;
  text-transform:uppercase;
  color:#64748b;
  letter-spacing:1.2px;
  margin-bottom:6px;
  font-weight:700
}
.detail-item .value{
  font-size:16px;
  font-weight:600;
  color:#e2e8f0
}

/* ===== SCORE BADGE (MODAL) ===== */
.score-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:80px;
  height:80px;
  border-radius:50%;
  font-size:32px;
  font-weight:800;
  margin-bottom:16px;
  box-shadow:0 8px 24px rgba(0,0,0,0.4);
  animation:scoreFloat 3s ease-in-out infinite
}
.score-badge.high{
  background:linear-gradient(135deg,rgba(34,197,94,0.2),rgba(34,197,94,0.3));
  color:#22c55e;
  border:3px solid #22c55e;
  box-shadow:0 0 32px rgba(34,197,94,0.5),0 8px 24px rgba(0,0,0,0.4)
}
.score-badge.med{
  background:linear-gradient(135deg,rgba(245,158,11,0.2),rgba(245,158,11,0.3));
  color:#f59e0b;
  border:3px solid #f59e0b;
  box-shadow:0 0 32px rgba(245,158,11,0.5),0 8px 24px rgba(0,0,0,0.4)
}
.score-badge.low{
  background:linear-gradient(135deg,rgba(100,116,139,0.2),rgba(100,116,139,0.3));
  color:#94a3b8;
  border:3px solid #64748b;
  box-shadow:0 0 24px rgba(100,116,139,0.4),0 8px 24px rgba(0,0,0,0.4)
}

/* ===== BONUS CARDS ===== */
.bonus-card{
  background:linear-gradient(135deg,rgba(15,23,42,0.8),rgba(15,23,42,0.95));
  border:1px solid rgba(96,165,250,0.2);
  border-radius:16px;
  padding:24px;
  margin-bottom:20px;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  position:relative;
  overflow:hidden
}
.bonus-card::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  width:4px;
  height:100%;
  background:linear-gradient(180deg,#60a5fa,#a78bfa);
  opacity:0;
  transition:opacity 0.3s ease
}
.bonus-card:hover{
  transform:translateX(4px);
  border-color:rgba(96,165,250,0.4);
  box-shadow:0 8px 24px rgba(0,0,0,0.3)
}
.bonus-card:hover::before{opacity:1}
.bonus-card h4{
  color:#60a5fa;
  font-size:18px;
  margin-bottom:12px;
  font-weight:700
}
.bonus-value{
  display:inline-block;
  background:linear-gradient(135deg,rgba(34,197,94,0.2),rgba(34,197,94,0.3));
  color:#22c55e;
  padding:6px 16px;
  border-radius:8px;
  font-size:14px;
  font-weight:700;
  margin-bottom:16px;
  border:1px solid rgba(34,197,94,0.3);
  box-shadow:0 0 16px rgba(34,197,94,0.2)
}
.bonus-card p{
  color:#cbd5e1;
  line-height:1.7;
  margin-bottom:12px;
  font-size:15px
}
.bonus-why{
  background:rgba(30,41,59,0.6);
  padding:16px;
  border-radius:10px;
  border-left:3px solid #60a5fa;
  margin-top:16px;
  backdrop-filter:blur(4px)
}
.bonus-why strong{
  color:#60a5fa;
  display:block;
  margin-bottom:8px;
  font-size:14px;
  font-weight:700
}

/* ===== EMAIL CARDS ===== */
.email-card{
  background:linear-gradient(135deg,rgba(15,23,42,0.8),rgba(15,23,42,0.95));
  border:1px solid rgba(139,92,246,0.2);
  border-radius:16px;
  padding:28px;
  margin-bottom:24px;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  position:relative;
  overflow:hidden
}
.email-card::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:3px;
  background:linear-gradient(90deg,#a78bfa,#60a5fa);
  opacity:0;
  transition:opacity 0.3s ease
}
.email-card:hover{
  border-color:rgba(139,92,246,0.4);
  box-shadow:0 12px 32px rgba(0,0,0,0.4);
  transform:translateY(-2px)
}
.email-card:hover::before{opacity:1}
.email-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-bottom:20px;
  gap:20px
}
.email-header h4{
  color:#a78bfa;
  font-size:18px;
  margin:0;
  font-weight:700
}
.copy-btn{
  background:linear-gradient(135deg,#3b82f6,#2563eb);
  color:#fff;
  border:none;
  padding:8px 18px;
  border-radius:10px;
  font-size:13px;
  font-weight:600;
  cursor:pointer;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  white-space:nowrap;
  box-shadow:0 4px 12px rgba(59,130,246,0.3)
}
.copy-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 20px rgba(59,130,246,0.5);
  background:linear-gradient(135deg,#2563eb,#1d4ed8)
}
.copy-btn.copied{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  box-shadow:0 6px 20px rgba(34,197,94,0.5)
}
.copy-btn:active{transform:translateY(0) scale(0.96)}
.email-field{margin-bottom:16px}
.email-field .field-label{
  font-size:11px;
  text-transform:uppercase;
  color:#64748b;
  letter-spacing:1.2px;
  margin-bottom:6px;
  font-weight:700
}
.email-field .field-value{
  color:#cbd5e1;
  background:rgba(30,41,59,0.6);
  padding:12px 16px;
  border-radius:10px;
  font-size:14px;
  line-height:1.7;
  white-space:pre-wrap;
  border:1px solid rgba(71,85,105,0.4)
}
.email-body{
  color:#cbd5e1;
  background:rgba(30,41,59,0.6);
  padding:20px;
  border-radius:12px;
  font-size:15px;
  line-height:1.9;
  white-space:pre-wrap;
  font-family:inherit;
  border:1px solid rgba(71,85,105,0.4)
}

/* ===== GENERATE BUTTON ===== */
.generate-btn{
  background:linear-gradient(135deg,#a78bfa,#60a5fa);
  color:#fff;
  border:none;
  padding:16px 32px;
  border-radius:12px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  display:inline-block;
  margin-top:16px;
  box-shadow:0 8px 24px rgba(167,139,250,0.4);
  position:relative;
  overflow:hidden
}
.generate-btn::before{
  content:'';
  position:absolute;
  top:50%;
  left:50%;
  width:0;
  height:0;
  background:rgba(255,255,255,0.2);
  border-radius:50%;
  transform:translate(-50%,-50%);
  transition:width 0.5s ease,height 0.5s ease
}
.generate-btn:hover{
  transform:translateY(-3px);
  box-shadow:0 12px 32px rgba(167,139,250,0.6)
}
.generate-btn:hover::before{
  width:400px;
  height:400px
}
.generate-btn:active{transform:translateY(-1px) scale(0.98)}

/* ===== LOADING STATE ===== */
.loading{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:64px;
  color:#94a3b8;
  font-size:16px;
  font-weight:500;
  animation:pulse 2s ease-in-out infinite
}

/* ===== ANIMATIONS ===== */
@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}
@keyframes slideDown{
  from{opacity:0;transform:translateY(-20px)}
  to{opacity:1;transform:translateY(0)}
}
@keyframes modalSlideIn{
  from{opacity:0;transform:scale(0.9) translateY(20px)}
  to{opacity:1;transform:scale(1) translateY(0)}
}
@keyframes pulse{
  0%,100%{opacity:1}
  50%{opacity:0.5}
}
@keyframes scoreFloat{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-8px)}
}

/* ===== RESPONSIVE DESIGN ===== */
@media(max-width:768px){
  .header,.stats,.filters,.grid{padding-left:20px;padding-right:20px}
  .header h1{font-size:26px}
  .header p{font-size:14px}
  .stats{grid-template-columns:repeat(2,1fr);gap:16px}
  .stat{padding:20px}
  .stat .num{font-size:28px}
  .grid{grid-template-columns:1fr;gap:20px}
  .card{padding:24px}
  .score{width:48px;height:48px;font-size:18px}
  .modal-content{margin:16px;max-height:94vh;border-radius:20px}
  .modal-header{padding:24px 24px}
  .modal-header h2{font-size:22px}
  .tabs{padding:0 24px}
  .tab{padding:14px 18px;font-size:14px}
  .detail-section{padding:24px}
  .detail-row{grid-template-columns:1fr}
  .email-header{flex-direction:column;align-items:stretch}
  .copy-btn{width:100%;text-align:center}
  .filters button{font-size:13px;padding:8px 16px}
}

@media(max-width:480px){
  .header{padding:24px 16px}
  .stats{grid-template-columns:1fr}
  .filters{gap:8px}
  .card h3{font-size:17px}
  .meta{gap:12px;font-size:13px}
  .modal-header,.detail-section,.tabs{padding-left:20px;padding-right:20px}
}

/* ===== ACCESSIBILITY ===== */
*:focus-visible{
  outline:2px solid #60a5fa;
  outline-offset:2px;
  border-radius:4px
}
button:focus-visible{outline-offset:4px}

/* ===== SMOOTH TRANSITIONS ===== */
*{transition-timing-function:cubic-bezier(0.4,0,0.2,1)}
</style>
</head>
<body>
<div class="header">
<h1>üöÄ Affiliate Autopilot Dashboard</h1>
<p>MunchEye launches scored & filtered for Adrian's niches ‚Äî AI Tools, SaaS, Digital Marketing, Content Creation, Automation</p>
</div>
<div class="stats">
<div class="stat"><div class="num" id="totalCount">0</div><div class="label">Launches Found</div></div>
<div class="stat"><div class="num" id="topCount">0</div><div class="label">Top Scored</div></div>
<div class="stat"><div class="num" id="avgScore">0</div><div class="label">Avg Score</div></div>
<div class="stat"><div class="num" id="megaCount">0</div><div class="label">Mega Launches</div></div>
</div>
<div class="filters">
<button class="active" data-filter="all"><span>All</span></button>
<button data-filter="AI Tools"><span>ü§ñ AI Tools</span></button>
<button data-filter="SaaS"><span>üíª SaaS</span></button>
<button data-filter="Digital Marketing"><span>üìà Marketing</span></button>
<button data-filter="Content Creation"><span>üé¨ Content</span></button>
<button data-filter="Automation"><span>‚ö° Automation</span></button>
</div>
<div class="grid" id="grid">
<div class="loading">Loading launches...</div>
</div>

<!-- Modal -->
<div class="modal" id="modal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
<div class="modal-content">
<div class="modal-header">
<h2 id="modalTitle"></h2>
<button class="close-btn" onclick="closeModal()" aria-label="Close modal">√ó</button>
</div>
<div class="tabs" role="tablist">
<button class="tab active" onclick="switchTab('brief')" role="tab" aria-selected="true" aria-controls="tab-brief">üìã Brief</button>
<button class="tab" onclick="switchTab('bonuses')" role="tab" aria-selected="false" aria-controls="tab-bonuses">üéÅ Bonuses</button>
<button class="tab" onclick="switchTab('emails')" role="tab" aria-selected="false" aria-controls="tab-emails">üìß Emails</button>
</div>
<div class="modal-body">
<div id="tab-brief" class="tab-content active" role="tabpanel"></div>
<div id="tab-bonuses" class="tab-content" role="tabpanel"></div>
<div id="tab-emails" class="tab-content" role="tabpanel"></div>
</div>
</div>
</div>

<script>
// Global state
let DATA = [];
const CAMPAIGNS = {};

// Utility: Convert product name to slug
function slugify(name) {
  return name.toLowerCase()
    .replace(/[^\w\s-]/g, '')
    .replace(/\s+/g, '-')
    .replace(/--+/g, '-')
    .trim();
}

// Markdown Parser
function parseMarkdown(markdown) {
  // Simple markdown parser - converts basic markdown to HTML
  return markdown
    .replace(/^### (.+)$/gm, '<h4>$1</h4>')
    .replace(/^## (.+)$/gm, '<h3>$1</h3>')
    .replace(/^# (.+)$/gm, '<h2>$1</h2>')
    .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
    .replace(/\*(.+?)\*/g, '<em>$1</em>')
    .replace(/^- (.+)$/gm, '<li>$1</li>')
    .replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>')
    .replace(/\n\n/g, '</p><p>')
    .replace(/^(.+)$/gm, '<p>$1</p>');
}

// Parse campaign brief from markdown
function parseCampaignBrief(markdown) {
  let strategy = '';
  let targetMarket = '';
  let campaignWindow = '';
  
  // Extract metadata from markdown frontmatter or content
  const strategyMatch = markdown.match(/## Strategy Summary\s+([\s\S]+?)(?=\n#|$)/);
  if (strategyMatch) {
    strategy = strategyMatch[1].trim();
  }
  
  const targetMatch = markdown.match(/\*\*Target Market:\*\*\s+(.+)/);
  if (targetMatch) {
    targetMarket = targetMatch[1].trim();
  }
  
  const windowMatch = markdown.match(/\*\*Campaign Window:\*\*\s+(.+)/);
  if (windowMatch) {
    campaignWindow = windowMatch[1].trim();
  }
  
  return { strategy, targetMarket, campaignWindow };
}

// Parse bonuses from markdown
function parseBonuses(markdown) {
  const bonuses = [];
  // Split by bonus sections (## Bonus #1:, ## Bonus #2:, etc.)
  const sections = markdown.split(/(?=^## Bonus #\d+:)/gm).filter(s => s.trim());
  
  sections.forEach(section => {
    if (!section.includes('## Bonus #')) return;
    
    // Extract bonus name from "## Bonus #1: Name"
    const nameMatch = section.match(/## Bonus #\d+:\s+(.+?)(?=\n)/);
    const valueMatch = section.match(/\*\*Perceived Value:\*\*\s+\$(\d+)/);
    const descMatch = section.match(/\*\*Description:\*\*\s+([\s\S]+?)(?=\n\n\*\*Perceived Value)/);
    const whyMatch = section.match(/\*\*Why It Complements[^:]*:\*\*\s+([\s\S]+?)(?=\n---|\n##|$)/);
    
    if (nameMatch) {
      bonuses.push({
        name: nameMatch[1].trim(),
        value: valueMatch ? parseInt(valueMatch[1]) : 0,
        description: descMatch ? descMatch[1].trim() : '',
        why: whyMatch ? whyMatch[1].trim() : ''
      });
    }
  });
  
  return bonuses;
}

// Parse email sequence from markdown
function parseEmailSequence(markdown) {
  const emails = [];
  // Split by email sections (## DAY 1, ## DAY 2, etc.)
  const sections = markdown.split(/(?=^## DAY \d+)/gm).filter(s => s.trim());
  
  sections.forEach(section => {
    if (!section.includes('## DAY')) return;
    
    // Extract day heading "DAY 1 ‚Äî Title"
    const dayMatch = section.match(/## (DAY \d+[^\n]*)/);
    const subjectMatch = section.match(/\*\*Subject Line:\*\*\s+(.+)/);
    const previewMatch = section.match(/\*\*Preview Text:\*\*\s+(.+)/);
    const bodyMatch = section.match(/\*\*Body:\*\*\s+([\s\S]+?)(?=\n---|\n##|$)/);
    
    if (dayMatch && subjectMatch && bodyMatch) {
      emails.push({
        day: dayMatch[1].trim(),
        subject: subjectMatch[1].trim(),
        preview: previewMatch ? previewMatch[1].trim() : '',
        body: bodyMatch[1].trim()
      });
    }
  });
  
  return emails;
}

// Load campaign materials for a product
async function loadCampaign(productName) {
  const slug = slugify(productName);
  const basePath = `campaigns/${slug}`;
  
  try {
    // Try to fetch all three campaign files
    const [briefRes, bonusesRes, emailsRes] = await Promise.all([
      fetch(`${basePath}/campaign-brief.md`).catch(() => null),
      fetch(`${basePath}/bonuses.md`).catch(() => null),
      fetch(`${basePath}/email-sequence.md`).catch(() => null)
    ]);
    
    if (!briefRes || !briefRes.ok) {
      return null; // Campaign not found
    }
    
    const briefText = await briefRes.text();
    const bonusesText = bonusesRes && bonusesRes.ok ? await bonusesRes.text() : '';
    const emailsText = emailsRes && emailsRes.ok ? await emailsRes.text() : '';
    
    // Parse the markdown files
    const brief = parseCampaignBrief(briefText);
    const bonuses = bonusesText ? parseBonuses(bonusesText) : [];
    const emails = emailsText ? parseEmailSequence(emailsText) : [];
    
    return {
      brief,
      bonuses,
      emails
    };
  } catch (error) {
    console.error(`Failed to load campaign for ${productName}:`, error);
    return null;
  }
}

// Load all data
async function loadData() {
  try {
    // Load launches data
    const response = await fetch('launches_data.json');
    if (!response.ok) {
      throw new Error('Failed to load launches data');
    }
    
    DATA = await response.json();
    
    // Update stats
    updateStats();
    
    // Render initial grid
    render('all');
    
    // Load campaigns in background
    for (const product of DATA) {
      const campaign = await loadCampaign(product.product_name);
      if (campaign) {
        CAMPAIGNS[product.product_name] = campaign;
      }
    }
    
    console.log('Loaded campaigns:', Object.keys(CAMPAIGNS));
  } catch (error) {
    console.error('Failed to load data:', error);
    document.getElementById('grid').innerHTML = `
      <div style="grid-column:1/-1;text-align:center;padding:48px;color:#ef4444">
        <h3 style="margin-bottom:12px">Failed to Load Data</h3>
        <p>Could not load launches_data.json. Please check the file exists and is valid JSON.</p>
      </div>
    `;
  }
}

function updateStats() {
  document.getElementById('totalCount').textContent = DATA.length;
  document.getElementById('topCount').textContent = DATA.filter(d => d.score >= 6).length;
  document.getElementById('avgScore').textContent = DATA.length > 0 
    ? (DATA.reduce((a, d) => a + d.score, 0) / DATA.length).toFixed(1) 
    : '0';
  document.getElementById('megaCount').textContent = DATA.filter(d => d.is_mega_launch).length;
}

const tagClass = n => n.includes('AI') ? 'ai' : n.includes('SaaS') ? 'saas' : n.includes('Marketing') ? 'mktg' : n.includes('Content') ? 'content' : n.includes('Automation') ? 'auto' : '';
const scoreClass = s => s >= 7 ? 'high' : s >= 5 ? 'med' : 'low';

function render(filter) {
  const items = filter === 'all' ? DATA : DATA.filter(d => d.niche_categories.includes(filter));
  document.getElementById('grid').innerHTML = items.map(d => `
    <div class="card ${d.is_mega_launch ? 'mega' : ''}" onclick="openModal('${d.product_name.replace(/'/g, "\\'")}')">
      <div class="score ${scoreClass(d.score)}">${d.score}</div>
      <h3>${d.product_name}${d.is_mega_launch ? '<span class="mega-badge">MEGA</span>' : ''}</h3>
      <div class="vendor">${d.vendor} ¬∑ ${d.platform}</div>
      <div class="tags">${d.niche_categories.map(n => `<span class="tag ${tagClass(n)}">${n}</span>`).join('')}</div>
      <div class="meta">
        <span>üìÖ ${d.launch_date}</span>
        <span>üí∞ $${d.price_usd}</span>
        <span>üéØ ${d.commission_percent}%</span>
      </div>
      <button class="btn" onclick="event.stopPropagation(); window.open('${d.jv_page_url}', '_blank')">View JV Page ‚Üí</button>
    </div>
  `).join('');
}

function openModal(productName) {
  const product = DATA.find(d => d.product_name === productName);
  if (!product) return;
  
  const campaign = CAMPAIGNS[productName];
  
  document.getElementById('modalTitle').innerHTML = `${product.product_name}${product.is_mega_launch ? '<span class="mega-badge">MEGA</span>' : ''}`;
  
  // Brief Tab
  let briefHTML = `
    <div class="detail-section">
      <div style="display:flex;align-items:center;gap:20px;margin-bottom:24px">
        <div class="score-badge ${scoreClass(product.score)}">${product.score}</div>
        <div>
          <h3 style="margin:0 0 8px 0">${product.vendor}</h3>
          <p style="margin:0;color:#94a3b8">${product.platform} ¬∑ ${product.niche_categories.join(', ')}</p>
        </div>
      </div>
      
      <div class="detail-row">
        <div class="detail-item">
          <div class="label">Launch Date</div>
          <div class="value">üìÖ ${product.launch_date}</div>
        </div>
        <div class="detail-item">
          <div class="label">Price</div>
          <div class="value">üí∞ $${product.price_usd}</div>
        </div>
        <div class="detail-item">
          <div class="label">Commission</div>
          <div class="value">üéØ ${product.commission_percent}%</div>
        </div>
        <div class="detail-item">
          <div class="label">JV Link</div>
          <div class="value"><a href="${product.jv_page_url}" target="_blank" style="color:#60a5fa">View Page ‚Üí</a></div>
        </div>
      </div>`;
  
  if (campaign && campaign.brief && campaign.brief.strategy) {
    briefHTML += `
      <h3 style="margin-top:24px;margin-bottom:12px">Campaign Strategy</h3>
      <p style="color:#cbd5e1;line-height:1.7">${campaign.brief.strategy}</p>`;
    
    if (campaign.brief.targetMarket || campaign.brief.campaignWindow) {
      briefHTML += `
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:20px">`;
      
      if (campaign.brief.targetMarket) {
        briefHTML += `
        <div class="detail-item">
          <div class="label">Target Market</div>
          <div class="value" style="font-size:13px">${campaign.brief.targetMarket}</div>
        </div>`;
      }
      
      if (campaign.brief.campaignWindow) {
        briefHTML += `
        <div class="detail-item">
          <div class="label">Campaign Window</div>
          <div class="value" style="font-size:13px">${campaign.brief.campaignWindow}</div>
        </div>`;
      }
      
      briefHTML += `</div>`;
    }
  } else {
    briefHTML += `
      <div style="background:#0f172a;padding:24px;border-radius:12px;margin-top:24px;text-align:center">
        <p style="color:#64748b;margin-bottom:16px">Campaign materials not yet created for this launch.</p>
        <button class="generate-btn" onclick="alert('Campaign generation coming soon!')">ü§ñ Generate Campaign with AI</button>
      </div>`;
  }
  
  briefHTML += `</div>`;
  document.getElementById('tab-brief').innerHTML = briefHTML;
  
  // Bonuses Tab
  let bonusesHTML = '<div class="detail-section">';
  if (campaign && campaign.bonuses && campaign.bonuses.length > 0) {
    const totalValue = campaign.bonuses.reduce((sum, b) => sum + b.value, 0);
    bonusesHTML += `<h3 style="margin-bottom:20px">Exclusive Bonus Stack ‚Äî Total Value: $${totalValue}</h3>`;
    campaign.bonuses.forEach((bonus, idx) => {
      bonusesHTML += `
        <div class="bonus-card">
          <h4>üéÅ Bonus #${idx + 1}: ${bonus.name}</h4>
          <div class="bonus-value">Value: $${bonus.value}</div>
          <p>${bonus.description}</p>
          <div class="bonus-why">
            <strong>Why It Complements ${productName}:</strong>
            <p style="margin:0;color:#94a3b8">${bonus.why}</p>
          </div>
        </div>`;
    });
  } else {
    bonusesHTML += `
      <div style="background:#0f172a;padding:32px;border-radius:12px;text-align:center">
        <p style="color:#64748b;margin-bottom:16px">No bonuses configured yet for this launch.</p>
        <button class="generate-btn" onclick="alert('Bonus generation coming soon!')">üéÅ Generate Bonuses with AI</button>
      </div>`;
  }
  bonusesHTML += '</div>';
  document.getElementById('tab-bonuses').innerHTML = bonusesHTML;
  
  // Emails Tab
  let emailsHTML = '<div class="detail-section">';
  if (campaign && campaign.emails && campaign.emails.length > 0) {
    emailsHTML += `<h3 style="margin-bottom:20px">${campaign.emails.length}-Day Email Sequence</h3>`;
    campaign.emails.forEach((email, idx) => {
      emailsHTML += `
        <div class="email-card">
          <div class="email-header">
            <h4>${email.day}</h4>
            <button class="copy-btn" onclick="copyEmail(${idx}, '${productName.replace(/'/g, "\\'")}')">üìã Copy Email</button>
          </div>
          <div class="email-field">
            <div class="field-label">Subject Line</div>
            <div class="field-value">${email.subject}</div>
          </div>
          <div class="email-field">
            <div class="field-label">Preview Text</div>
            <div class="field-value">${email.preview}</div>
          </div>
          <div class="email-field">
            <div class="field-label">Email Body</div>
            <div class="email-body">${email.body}</div>
          </div>
        </div>`;
    });
  } else {
    emailsHTML += `
      <div style="background:#0f172a;padding:32px;border-radius:12px;text-align:center">
        <p style="color:#64748b;margin-bottom:16px">Email sequence not yet created for this launch.</p>
        <button class="generate-btn" onclick="alert('Email generation coming soon!')">‚úâÔ∏è Generate Email Sequence with AI</button>
      </div>`;
  }
  emailsHTML += '</div>';
  document.getElementById('tab-emails').innerHTML = emailsHTML;
  
  document.getElementById('modal').classList.add('open');
  document.body.style.overflow = 'hidden';
  switchTab('brief');
}

function closeModal() {
  document.getElementById('modal').classList.remove('open');
  document.body.style.overflow = '';
}

function switchTab(tabName) {
  // Update tab buttons
  document.querySelectorAll('.tab').forEach(t => {
    t.classList.remove('active');
    t.setAttribute('aria-selected', 'false');
  });
  // Update tab content
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  
  // Set active tab
  event.target.classList.add('active');
  event.target.setAttribute('aria-selected', 'true');
  document.getElementById('tab-' + tabName).classList.add('active');
}

function copyEmail(emailIdx, productName) {
  const campaign = CAMPAIGNS[productName];
  if (!campaign || !campaign.emails[emailIdx]) return;
  
  const email = campaign.emails[emailIdx];
  const fullEmail = `Subject: ${email.subject}\n\nPreview: ${email.preview}\n\n${email.body}`;
  
  navigator.clipboard.writeText(fullEmail).then(() => {
    const btns = document.querySelectorAll('.copy-btn');
    const btn = btns[emailIdx];
    const originalText = btn.innerHTML;
    btn.innerHTML = '‚úì Copied!';
    btn.classList.add('copied');
    setTimeout(() => {
      btn.innerHTML = originalText;
      btn.classList.remove('copied');
    }, 2000);
  });
}

// Close modal on outside click
document.getElementById('modal').addEventListener('click', (e) => {
  if (e.target.id === 'modal') closeModal();
});

// Close modal on Escape
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') closeModal();
});

// Filter buttons
document.querySelectorAll('.filters button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.filters button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    render(btn.dataset.filter);
  });
});

// Initialize on load
loadData();
</script>
</body>
</html>
